<!DOCTYPE html>
<html>

<head>
   <title>MapLibre GL JS debug page for terrian</title>
   <meta charset='utf-8'>
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
   <link rel='stylesheet' href='../../dist/maplibre-gl.css' />
   <style>
      body {
         margin: 0;
         padding: 0;
      }

      #map {
         position: absolute;
         top: 0;
         bottom: 0;
         width: 100%;
      }

      #layers {
         position: absolute;
         top: 10px;
         left: 10px;
         width: 120px;
         background: white
      }
   </style>
</head>

<body>
   <div id='map'></div>
   <div id="layers">
      <input type="checkbox" id="l_osm" checked="true"> OSM
      <br>
      <input type="checkbox" id="l_landcover" checked="true"> Landcover
      <br>
      <input type="checkbox" id="l_hills" checked="true"> Hillshade
      <br>
      <input type="checkbox" id="l_road" checked="true"> Road
   </div>

   <script src='../../dist/maplibre-gl-dev.js'></script>
   <script>
      var map = new maplibregl.Map({
         hash: true,
         container: 'map',
         center: [11.35, 47.25], // starting position [lng, lat]
         zoom: 12,
         style: {
            version: 8,
            sources: {
               osm: {
                  type: 'raster',
                  tiles: ['https://a.tile.openstreetmap.org/{z}/{x}/{y}.png'],
                  tileSize: 256,
                  attribution: '&copy; OpenStreetMap Contributors',
                  maxzoom: 19
               },
               terrainSource: {
                  type: 'raster-dem',
                  url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',
                  tileSize: 256
               },
               hillshadeSource: {
                  type: 'raster-dem',
                  url: 'https://demotiles.maplibre.org/terrain-tiles/tiles.json',
                  tileSize: 256
               },
               openmaptiles: {
                  type: 'vector',
                  url: 'https://api.maptiler.com/tiles/v3/tiles.json?key=XXXXXX'
               }
            },
            layers: [
               {
                  id: 'osm',
                  type: 'raster',
                  source: 'osm',
               },
               {
                  "id": "landcover_cropland",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "globallandcover",
                  "layout": {
                     "visibility": "visible"
                  },
                  "paint": {
                     "fill-color": "rgba(243, 235, 195, 1)",
                     "fill-opacity": {
                        "base": 1,
                        "stops": [[4, 1], [8, 0]]
                     }
                  },
                  "filter": ["all", ["==", "class", "crop"]]
               }, {
                  "id": "landcover_grassland",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "globallandcover",
                  "paint": {
                     "fill-color": "rgba(226, 236, 197, 1)",
                     "fill-opacity": {
                        "base": 1,
                        "stops": [[4, 1], [8, 0]]
                     }
                  },
                  "filter": ["all", ["==", "class", "grass"]]
               }, {
                  "id": "landcover_scrubland",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "globallandcover",
                  "paint": {
                     "fill-color": "rgba(199, 230, 179, 1)",
                     "fill-opacity": {
                        "base": 1,
                        "stops": [[4, 1], [8, 0]]
                     }
                  },
                  "filter": ["all", ["==", "class", "scrub"]]
               }, {
                  "id": "landcover_treeland",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "globallandcover",
                  "paint": {
                     "fill-color": "rgba(190, 222, 173, 1)",
                     "fill-opacity": {
                        "base": 1,
                        "stops": [[4, 1], [8, 0]]
                     }
                  },
                  "filter": ["all", ["==", "class", "tree"]]
               }, {
                  "id": "landcover_forestland",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "globallandcover",
                  "paint": {
                     "fill-color": "rgba(171, 217, 170, 1)",
                     "fill-opacity": {
                        "base": 1,
                        "stops": [[4, 1], [8, 0]]
                     }
                  },
                  "filter": ["all", ["==", "class", "forest"]]
               }, {
                  "id": "landcover_snowland",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "globallandcover",
                  "layout": {
                     "visibility": "visible"
                  },
                  "paint": {
                     "fill-color": "hsl(0, 0%, 100%)",
                     "fill-opacity": {
                        "base": 1,
                        "stops": [[4, 1], [8, 0]]
                     }
                  },
                  "filter": ["all", ["==", "class", "snow"]]
               },
               {
                  "id": "landcover_wood",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "landcover",
                  "layout": {
                     "visibility": "visible"
                  },
                  "paint": {
                     "fill-color": "hsla(98, 61%, 72%, 0.7)",
                     "fill-opacity": 0.4,
                     "fill-antialias": false
                  },
                  "metadata": {},
                  "filter": ["all", ["==", "class", "wood"]]
               }, {
                  "id": "landcover_grass",
                  "type": "fill",
                  "source": "openmaptiles",
                  "source-layer": "landcover",
                  "layout": {
                     "visibility": "visible"
                  },
                  "paint": {
                     "fill-color": "rgba(224, 232, 201, 1)",
                     "fill-opacity": 0.3,
                     "fill-antialias": false
                  },
                  "metadata": {},
                  "filter": ["all", ["==", "class", "grass"]]
               },
               {
                  id: 'hills',
                  type: 'hillshade',
                  source: 'hillshadeSource',
                  layout: { visibility: 'visible' },
                  paint: {
                     'hillshade-shadow-color': '#473B24',
                     'hillshade-illumination-anchor': 'map',
                     'hillshade-illumination-direction': 150
                  }
               },
               {
                  "id": "road_link",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "minzoom": 13,
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "#fea",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[12.5, 0], [13, 1.5], [14, 2.5], [20, 11.5]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["==", "ramp", 1], ["!in", "class", "motorway", "trunk", "primary", "pedestrian", "path", "track", "service"]]
               }, {
                  "id": "road_trunk_primary_link",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "#fea",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[5, 0], [7, 0.5], [20, 10]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["==", "ramp", 1], ["in", "class", "primary", "trunk"]]
               }, {
                  "id": "road_motorway_link",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "minzoom": 10,
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "#fc8",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[9.9, 0], [10, 1], [14, 6], [20, 10]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["==", "class", "motorway"], ["==", "ramp", 1]]
               }, {
                  "id": "road_service_track",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "minzoom": 13,
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "rgba(255, 255, 255, 1)",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[13, 1.5], [16, 2], [20, 8]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["in", "class", "service", "track"]]
               },
               {
                  "id": "road_minor",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "#fff",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[12.9, 0], [13, 1], [14, 2.5], [20, 13]]
                     },
                     "line-opacity": 1
                  },
                  "metadata": {},
                  "filter": ["all", ["==", "$type", "LineString"], ["all", ["!in", "brunnel", "bridge", "tunnel"], ["in", "class", "minor"]]]
               },
               {
                  "id": "road_secondary_tertiary",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "rgba(245, 245, 243, 1)",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[6.5, 0], [8, 0.5], [20, 13]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["in", "class", "secondary", "tertiary"]]
               },
               {
                  "id": "road_trunk_primary",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": "#fea",
                     "line-width": {
                        "base": 1.2,
                        "stops": [[5, 0], [7, 1], [20, 18]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["!=", "ramp", 1], ["in", "class", "primary", "trunk"]]
               },
               {
                  "id": "road_motorway",
                  "type": "line",
                  "source": "openmaptiles",
                  "source-layer": "transportation",
                  "minzoom": 5,
                  "layout": {
                     "line-cap": "round",
                     "line-join": "round",
                     "visibility": "visible"
                  },
                  "paint": {
                     "line-color": {
                        "base": 1,
                        "stops": [[5, "hsl(26, 87%, 62%)"], [6, "#fc8"]]
                     },
                     "line-width": {
                        "base": 1.2,
                        "stops": [[5, 0], [7, 1], [20, 18]]
                     }
                  },
                  "metadata": {},
                  "filter": ["all", ["!in", "brunnel", "bridge", "tunnel"], ["==", "class", "motorway"], ["!=", "ramp", 1]]
               }
            ],
            terrain: {
               source: 'terrainSource',
               exaggeration: 1
            }
         },
      });

      map.addControl(
         new maplibregl.NavigationControl({
            visualizePitch: true,
            showZoom: true,
            showCompass: true
         })
      );

      map.addControl(
         new maplibregl.TerrainControl({
            source: 'terrainSource',
            exaggeration: 1
         })
      );

      document.getElementById('l_osm').addEventListener('change', function () {
         map.setLayoutProperty('osm', 'visibility', this.checked ? 'visible' : 'none');
      });
      document.getElementById('l_landcover').addEventListener('change', function () {
         ["landcover_cropland", "landcover_grassland", "landcover_scrubland", "landcover_treeland", "landcover_forestland", "landcover_snowland", "landcover_wood", "landcover_grass"].forEach(layerId => {
            map.setLayoutProperty(layerId, 'visibility', this.checked ? 'visible' : 'none');
         });
      });
      document.getElementById('l_hills').addEventListener('change', function () {
         map.setLayoutProperty('hills', 'visibility', this.checked ? 'visible' : 'none');
      });
      document.getElementById('l_road').addEventListener('change', function () {
         ["road_link", "road_trunk_primary_link", "road_motorway_link", "road_service_track", "road_minor", "road_secondary_tertiary", "road_trunk_primary", "road_motorway"].forEach(layerId => {
            map.setLayoutProperty(layerId, 'visibility', this.checked ? 'visible' : 'none');
         });
      });
   </script>
</body>

</html>